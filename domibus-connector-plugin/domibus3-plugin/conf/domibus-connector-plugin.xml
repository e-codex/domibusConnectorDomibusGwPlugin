<?xml version="1.0" encoding="UTF-8"?>
<beans
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:amq="http://activemq.apache.org/schema/core"
    xmlns:jaxws="http://cxf.apache.org/jaxws"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:c="http://www.springframework.org/schema/c"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns="http://www.springframework.org/schema/beans"
	xmlns:http-conf="http://cxf.apache.org/transports/http/configuration"
	xmlns:sec="http://cxf.apache.org/configuration/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/util
    http://www.springframework.org/schema/util/spring-util.xsd
    http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd
	http://activemq.apache.org/schema/core
    http://activemq.apache.org/schema/core/activemq-core.xsd
    http://cxf.apache.org/transports/http/configuration
    http://cxf.apache.org/schemas/configuration/http-conf.xsd">

    <!-- ATTENTION! To set the connection between this plugin and your domibusConnector installation it is important
    to set the following property in the "domibus.properties":
    connector.delivery.service.endpoint.address=http://"YOUR INSTALLATION" -->
    
	<bean
		id="domibusConnectorWebservice"
        class="eu.domibus.connector.plugin.ws.DomibusConnectorWebservice">
        <constructor-arg value="domibusConnectorWebservice"/>
        <property name="lister" ref="connectorDeliveryWebserviceNotificationListenerService"/>
   </bean>
	
	 <amq:queue name="notifyDomibusConnectorDeliveryWebServiceQueue"
               physicalName="domibus.notification.webservice"/>

	<bean id="connectorDeliveryWebserviceNotificationListenerService"
          class="eu.domibus.plugin.NotificationListenerService"
          c:queue-ref="notifyDomibusConnectorDeliveryWebServiceQueue" c:mode="PUSH"
          p:backendConnector-ref="domibusConnectorWebservice">
    </bean> 

	<jaxws:endpoint
		id="connectorSubmissionInterfaceEndpoint"
        implementor="#domibusConnectorWebservice"
        address="/domibusConnectorSubmissionWebservice"
        serviceName="s:DomibusConnectorGatewaySubmissionWebService"  
        wsdlLocation="wsdl/DomibusConnectorGatewaySubmissionWebService.wsdl"
        xmlns:s="http://connector.domibus.eu/ws/gateway/submission/webservice">
   	</jaxws:endpoint>
   	
   	<jaxws:client id="connectorDeliveryClient" 
   		serviceClass="eu.domibus.connector.ws.gateway.delivery.webservice.DomibusConnectorGatewayDeliveryWebService"
		address="${connector.delivery.service.endpoint.address}"
		serviceName="s:DomibusConnectorGatewayDeliveryWebService"  
        wsdlLocation="wsdl/DomibusConnectorGatewayDeliveryWebService.wsdl"
        xmlns:s="http://connector.domibus.eu/ws/gateway/delivery/webservice" />

</beans>